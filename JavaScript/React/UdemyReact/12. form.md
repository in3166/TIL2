# 언제 form의 유효성을 검사할 것인가
- When form is submitted
  - 좋지 않은 UX - Too late.
```js
const SimpleInput = (props) => {
  const [enteredName, setenteredName] = useState("");
  
  const [enteredNameIsValid, setenteredNameIsValid] = useState(false); 
  // 이 값을 true로 초기화하는 것은 맞지 않음
  // 만약 useEffect에서 무언가 true일 때 해야한다면 잘못 작동할 것 그래서 다음 state를 추가
  
  const [enteredNameTouched, setenteredNameTouched] = useState(false);
  const nameInputChangeHandler = (e) => {
    setenteredName(e.target.value);
  };

  const nameInputRef = useRef();

  const formSubmissionHandler = (e) => {
    e.preventDefault();
    setenteredNameTouched(true);
    if (enteredName.trim() === "") {
      setenteredNameIsValid(false);
    }
    console.log(nameInputRef.current.value);
  };

  const nameInputIsInvalid = !enteredNameIsValid && enteredNameTouched;

  const nameInputClasses = nameInputIsInvalid
    ? "form-control invalid"
    : "form-control";

  return (
    <form onSubmit={formSubmissionHandler}>
      <div className={nameInputClasses}>
        <label htmlFor="name">Your Name</label>
        <input
          ref={nameInputRef}
          type="text"
          id="name"
          onChange={nameInputChangeHandler}
        />
        {nameInputIsInvalid && <p className="error-text">빈 칸 금지</p>}
      </div>
    </form>
  );
};
```

- When a input is losing focus


- On every keystroke

- 입력된 Input value를 가져오는 2가지 방법
  - 모든 키입력(keystroke)을 듣고 그 값을 `state`에 저장하기: keystroke 마다 값이 필요할 때, 입력 값을 reset 할 때
  ```js
    const [enteredName, setenteredName] = useState("");

    const nameInputChangeHandler = (e) => {
      setenteredName(e.target.value);
    };

    const formSubmissionHandler = e => {
      e.preventDefault();
      console.log(enteredName)
    }
    return (
      <form onSubmit={formSubmissionHandler}>
        <div className="form-control">
          <label htmlFor="name">Your Name</label>
          // setEnteredValue('')을 초기화 한다면 value={enteredValue}로 바뀐 값을 적용시켜야 한다.
          <input type="text" id="name" onChange={nameInputChangeHandler} />
        </div>
        <div className="form-actions">
          <button>Submit</button>
        </div>
      </form>
    );
  };
  ```
  
  - `ref`를 사용해서 가져오기: submit 시 유효성 검사할 때
    - `ref.current.value = '..'`: 작동하지만 직접 DOM 조작을 하게 되어 이상적이지 않음 => DOM 조작은 React가 해야한다.
  ```js
  const nameInputRef = useRef();

  const formSubmissionHandler = e => {
    e.preventDefault();
    console.log(nameInputRef.current.value)
    
  }

  return (
    <form onSubmit={formSubmissionHandler}>
      <div className="form-control">
        <label htmlFor="name">Your Name</label>
        <input ref={nameInputRef} type="text" id="name" onChange={nameInputChangeHandler} />
        //...
  ```

<br>

- 항상 프론트에서 (브라우저에서) 유효성을 검증해야하는 것은 아니다.
- 단지, 좋은 사용자 경험을 제공하기 위해서이지 보안 메커니즘 같은 것이 아니다.
- JavaScript Code는 변경될 수 있기 때문에 신뢰할만하지 않다.


<br><br><br>
<출처>
- Udemy: React 완벽 가이드
