# useReducer
- 상태 관리하는 것을 도와주는 React Hook
- `useState`와 비슷하지만 더 많은 기능이 있다.
  - *more complex state - for example if it got multiple states, multiple ways of changing it or dependencies to other states*
  - 여러 개의 state, state를 변경하는 방법이 여러 개인 경우나 다른 state에 대한 dependecies가 있는 경우 등이 존재
  - 이럴 경우 `useState`를 사용하면 에러나 buggy code가 발생할 수 있다.

- `useReducer`는 `useState` 보다 강력한 state 관리를 제공한다.
  - 하지만, 사용하기 더 복잡하고 셋업이 필요하다.
<br>

### 로그인 예제
  - 이메일, 비밀번호 입력을 받는 state와 유효성 검사 state 존재
```js
  const [enteredEmail, setEnteredEmail] = useState("");
  const [emailIsValid, setEmailIsValid] = useState();
  const [enteredPassword, setEnteredPassword] = useState("");
  const [passwordIsValid, setPasswordIsValid] = useState();
  const [formIsValid, setFormIsValid] = useState(false);
```
- 위의 State 들은 커다란 하나의 State라고 볼 수 있다. (Form States)
  - 아니면 입력과 유효성 검사 두 개의 state를 하나로 묶어서 볼 수도 있다.
<br>

- 아래에서 `setFromIsValid`는 2개의 다른 state를 토대로 하나의 상태를 업데이트하고 있다.
- 예전 state를 토대로 state를 업데이트 할때 `function form`을 사용한다. `setState(prev => prev + ...)`
  - 하지만, 여기서 사용할 수 없는데 같은 상태의 이전 스냅샷을 가지고 다음 state를 업데이트 할 때만 사용될 수 있기 때문이다.

```js
const emailChangeHandler = (e) => {
  setEnteredEmail(e.target.value);
  setFormIsValid(e.target.value.includes('@') && enteredPassword.trim().length > 6);
}

const validateEmailHandler = () => {
    setEmailIsValid(enteredEmail.includes("@"));
};

const validatePasswordHandler = () => {
    setPasswordIsValid(enteredPassword.trim().length > 6);
};
```
- 위의 코드에서 `setFormIsValid`는 `enteredPassword` state가 업데이트 되기 전에 처리될 수 있다. (최신 상태가 아님)
  - React가 state를 업데이트를 스케쥴하는 방식 때문이다. (=> 그래서 function from을 사용해야한다.)
  - 하지만, 여기선 사용하지 않는데 2개의 다른 states에 의존하고 있고, `FormIsValid`의 이전 스탭샷에 의존하고 있지 않기 때문이다.
  - 이런 경우에 `useReducer`를 사용할 수 있다.
    - `input`, `valid` 같이 state가 함께 속해 있는 경우? or **state 업데이트가 다른 state에 의존하고 있는 경우**

- 즉, 위의 예제같이 다른 상태로 한 상태를 업데이트 해야하는 경우 대부분의 경우에서 작동은 하지만 어떤 경우에선 전혀 사용할 수 없게 된다. 
  - state 스냅샷이 최신이 아닐 경우가 있기 때문인데 최신의 state 스냅샷을 유지하기 위해 `function form`을 사용해야 하지만, 사용할 수 없는 경우가 이싿.
  - 위의 `setEmailIsValid`에서도 `function form`을 사용하고 싶지만, `setFormIsValid`처럼 다른 state에 의해 업데이트 되므로 사용할 수 없다.

- `useReducer`를 쓰지 않고, `useState`만 사용하여 여러 state를 하나로 합쳐 해결할 수도 있다.
  - 하지만, state가 매우 복잡해지고 관리하기 어려워 진다면 `useReducer`를 사용한다.

<br><br>




<br><br><br>
<출처>
- Udemy: React 완벽 가이드
